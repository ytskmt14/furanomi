# 利用者用アプリ - 地図表示機能

## ADDED Requirements

### 地図表示機能

**SHALL** 利用者は現在地を中心とした地図を表示できる

#### Scenario: 地図表示の基本動作
- 利用者が「地図表示」ボタンをクリックする
- 現在地を中心とした地図が表示される
- 地図上に店舗マーカーが配置される

**SHALL** 地図上に店舗マーカーを表示する

#### Scenario: 店舗マーカーの表示
- 地図上に検索結果の店舗がマーカーとして表示される
- マーカーには店舗名の最初の文字が表示される
- マーカーの色は店舗の空き状況に応じて変更される

**SHALL** マーカーの色は店舗の空き状況に応じて変更する

#### Scenario: マーカーの色分け
- 空きあり: 緑色のマーカー
- 混雑: 黄色のマーカー
- 満席: 赤色のマーカー
- 営業時間外: 灰色のマーカー

**SHALL** マーカーをクリックすると店舗詳細モーダルを表示する

#### Scenario: マーカークリック
- 利用者が店舗マーカーをクリックする
- 店舗詳細モーダルが表示される
- モーダルには店舗情報、営業時間、空き状況が表示される

### 表示切り替え機能

**SHALL** リスト表示と地図表示を切り替えできる

#### Scenario: 表示切り替え
- 利用者が「リスト表示」ボタンをクリックする
- 店舗一覧がリスト形式で表示される
- 利用者が「地図表示」ボタンをクリックする
- 店舗一覧が地図形式で表示される

**SHALL** 現在の表示モードが視覚的に分かる

#### Scenario: 表示モードの視覚的表示
- 現在選択されている表示モードのボタンがハイライトされる
- ボタンの色やスタイルで現在のモードが分かる

### 現在地表示

**SHALL** 現在地を青いマーカーで表示する

#### Scenario: 現在地マーカー
- 地図上に現在地が青いマーカーで表示される
- 現在地マーカーには「現在地」のタイトルが設定される
- 現在地が取得できない場合はデフォルト位置を使用する

## MODIFIED Requirements

### Google Maps API統合

**SHALL** Google Maps JavaScript APIを使用する

#### Scenario: API統合
- Google Maps JavaScript APIを読み込む
- API キーは環境変数で管理する
- 地図の初期化は適切にエラーハンドリングする
- エラー時は適切なメッセージを表示する
