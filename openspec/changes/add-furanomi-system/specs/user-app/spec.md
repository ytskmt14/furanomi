# 利用者用アプリ仕様

## ADDED Requirements

### Requirement: 店舗検索機能
利用者は現在地から近い店舗を検索できる。システムSHALL現在地から設定された半径以内の店舗を検索対象とする。デフォルトの検索半径は2kmとする。

#### Scenario: 現在地での店舗検索
- **WHEN** 利用者がアプリを開く
- **THEN** 現在地から半径2km以内の店舗が表示される

#### Scenario: 位置情報の許可
- **WHEN** 利用者が初回アクセス時に位置情報の許可を求められる
- **THEN** 許可した場合のみ現在地ベースの検索が可能になる

#### Scenario: 手動位置指定
- **WHEN** 利用者が位置情報を拒否または手動で位置を指定する
- **THEN** 住所入力または地図上で位置を選択できる

### Requirement: 店舗リスト表示
利用者は検索結果をリスト形式で確認できる。システムSHALL店舗名、距離、空き状況、評価をリストで表示する。

#### Scenario: 店舗リストの表示
- **WHEN** 店舗検索が実行される
- **THEN** 店舗名、距離、空き状況、評価がリストで表示される

#### Scenario: リストのソート
- **WHEN** 利用者がソート条件を選択する
- **THEN** 距離順、空き状況順、評価順でソートできる

#### Scenario: フィルタリング
- **WHEN** 利用者が店舗カテゴリを選択する
- **THEN** レストラン、カフェ、居酒屋などでフィルタリングできる

### Requirement: 地図表示機能
利用者は地図上で店舗の位置を確認できる。システムSHALL Google Maps上に店舗の位置をマーカーで表示する。

#### Scenario: 地図での店舗表示
- **WHEN** 利用者が地図ビューを選択する
- **THEN** Google Maps上に店舗の位置がマーカーで表示される

#### Scenario: マーカークリック
- **WHEN** 利用者が地図上のマーカーをクリックする
- **THEN** 店舗の詳細情報がポップアップで表示される

#### Scenario: 地図の操作
- **WHEN** 利用者が地図を操作する
- **THEN** ズーム、パン、現在地表示が可能

### Requirement: 店舗詳細表示
利用者は店舗の詳細情報を確認できる。システムSHALL店舗名、住所、電話番号、営業時間、空き状況を表示する。

#### Scenario: 店舗詳細の表示
- **WHEN** 利用者が店舗を選択する
- **THEN** 店舗名、住所、電話番号、営業時間、空き状況が表示される

#### Scenario: リアルタイム空き状況
- **WHEN** 店舗管理者が空き状況を更新する
- **THEN** 利用者画面に即座に反映される

### Requirement: ゲストアクセス
利用者は会員登録なしで基本的な機能を利用できる。システムSHALL会員登録なしで店舗検索・表示機能を提供する。

#### Scenario: ゲスト利用
- **WHEN** 利用者がアプリにアクセスする
- **THEN** 会員登録なしで店舗検索・表示機能が利用できる

#### Scenario: 機能制限
- **WHEN** 利用者がゲストとして利用する
- **THEN** お気に入り機能や予約機能は利用できない

### Requirement: PWA対応
利用者はネイティブアプリライクな体験を得られる。システムSHALL PWA機能を提供し、ホーム画面への追加を可能にする。

#### Scenario: アプリインストール
- **WHEN** 利用者がブラウザでアプリを開く
- **THEN** ホーム画面への追加が可能

#### Scenario: オフライン対応
- **WHEN** 利用者がオフライン状態になる
- **THEN** 基本的な店舗情報は表示される（空き状況は除く）

#### Scenario: プッシュ通知
- **WHEN** 利用者が通知を許可する
- **THEN** お気に入り店舗の空き状況変更時に通知される（将来機能）
