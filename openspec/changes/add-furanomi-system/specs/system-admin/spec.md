# システム管理者用アプリ仕様

## ADDED Requirements

### Requirement: システム設定管理
システム管理者はシステム全体の設定を管理できる。システムSHALL検索半径、表示件数、その他のシステム設定を変更できる。

#### Scenario: 検索半径の設定
- **WHEN** システム管理者が検索半径設定画面にアクセスする
- **THEN** デフォルトの検索半径（2km）を任意の値に変更できる

#### Scenario: 設定の保存
- **WHEN** システム管理者が設定を変更して保存する
- **THEN** 新しい設定が即座に利用者画面に反映される

#### Scenario: 設定のリセット
- **WHEN** システム管理者が設定をデフォルト値にリセットする
- **THEN** 検索半径が2kmに戻る

### Requirement: システム管理者認証
システム管理者は最高権限のアカウントでログインできる。システムSHALL追加のセキュリティ機能（2段階認証、IP制限）を提供する。

#### Scenario: 管理者ログイン
- **WHEN** システム管理者がログイン画面で認証情報を入力する
- **THEN** 有効な認証情報の場合、管理者ダッシュボードにアクセスできる

#### Scenario: セキュリティ強化
- **WHEN** システム管理者がログインする
- **THEN** 2段階認証またはIP制限などの追加セキュリティが適用される

### Requirement: 店舗管理
システム管理者はすべての店舗を登録・更新・削除できる。システムSHALL店舗の完全なCRUD操作を提供する。

#### Scenario: 店舗登録
- **WHEN** システム管理者が新しい店舗を登録する
- **THEN** 店舗名、住所、電話番号、営業時間、カテゴリ、店舗管理者アカウントを設定できる

#### Scenario: 店舗情報更新
- **WHEN** システム管理者が店舗情報を編集する
- **THEN** すべての店舗情報を変更できる

#### Scenario: 店舗削除
- **WHEN** システム管理者が店舗を削除する
- **THEN** 確認ダイアログが表示され、削除実行後は利用者画面から非表示になる

#### Scenario: 店舗一覧表示
- **WHEN** システム管理者が店舗管理画面にアクセスする
- **THEN** すべての店舗が一覧で表示され、検索・フィルタリングが可能

### Requirement: 店舗管理者アカウント管理
システム管理者は店舗管理者のアカウントを管理できる。システムSHALL店舗管理者アカウントの作成・編集・削除機能を提供する。

#### Scenario: アカウント作成
- **WHEN** システム管理者が新しい店舗管理者アカウントを作成する
- **THEN** ユーザー名、パスワード、担当店舗を設定できる

#### Scenario: アカウント編集
- **WHEN** システム管理者が店舗管理者アカウントを編集する
- **THEN** パスワードリセット、担当店舗変更が可能

#### Scenario: アカウント削除
- **WHEN** システム管理者が店舗管理者アカウントを削除する
- **THEN** アカウントが無効化され、ログインできなくなる

#### Scenario: アカウント一覧
- **WHEN** システム管理者がアカウント管理画面にアクセスする
- **THEN** すべての店舗管理者アカウントが一覧で表示される

### Requirement: システム監視
システム管理者はシステム全体の状況を監視できる。システムSHALLアクティブユーザー数、システム負荷、アクセスログを表示する。

#### Scenario: システム状況表示
- **WHEN** システム管理者がダッシュボードにアクセスする
- **THEN** アクティブユーザー数、店舗数、システム負荷が表示される

#### Scenario: アクセスログ
- **WHEN** システム管理者がログ画面にアクセスする
- **THEN** ユーザーアクセス、エラー、セキュリティイベントのログが表示される

#### Scenario: パフォーマンス監視
- **WHEN** システム管理者がパフォーマンス画面にアクセスする
- **THEN** API応答時間、データベース負荷、メモリ使用量が表示される

### Requirement: データ管理
システム管理者はシステムのデータを管理できる。システムSHALLデータバックアップ、復元、エクスポート機能を提供する。

#### Scenario: データバックアップ
- **WHEN** システム管理者がバックアップを実行する
- **THEN** 店舗情報、ユーザー情報、ログデータのバックアップが作成される

#### Scenario: データ復元
- **WHEN** システム管理者がデータ復元を実行する
- **THEN** 指定した時点のデータに復元できる

#### Scenario: データエクスポート
- **WHEN** システム管理者がデータエクスポートを実行する
- **THEN** CSV形式で店舗情報やアクセス統計をエクスポートできる

### Requirement: セキュリティ管理
システム管理者はセキュリティ設定を管理できる。システムSHALLアクセス制御、セキュリティログ、緊急対応機能を提供する。

#### Scenario: アクセス制御
- **WHEN** システム管理者がアクセス制御を設定する
- **THEN** IP制限、時間制限、地域制限を設定できる

#### Scenario: セキュリティログ
- **WHEN** システム管理者がセキュリティログを確認する
- **THEN** 不正アクセス試行、異常なアクセスパターンが表示される

#### Scenario: 緊急対応
- **WHEN** システム管理者が緊急停止を実行する
- **THEN** システム全体または特定機能を一時停止できる
