# ふらのみ Webアプリケーション実装タスク（MVPリリース向け整理）

## Phase 1: MVPリリース（最小限の機能でサービス開始）

### 🎯 MVPゴール
**利用者が店舗の空き状況を確認し、店舗管理者が空き状況を更新できる最小限の機能を提供**

### 1. プロジェクト初期設定
- [x] 1.1 フロントエンドプロジェクトの初期化（React + TypeScript + Vite）
- [x] 1.2 バックエンドプロジェクトの初期化（Node.js + Express + TypeScript）
- [x] 1.3 データベース設計とPostgreSQLセットアップ
- [x] 1.4 ESLint + Prettierの設定
- [x] 1.5 Gitリポジトリの初期化とブランチ戦略設定

### 2. データベース設計・実装（MVP最小限）
- [x] 2.1 店舗テーブルの設計・作成
- [x] 2.2 店舗管理者テーブルの設計・作成
- [x] 2.3 システム管理者テーブルの設計・作成
- [x] 2.4 空き状況テーブルの設計・作成
- [x] 2.5 システム設定テーブルの設計・作成（検索半径設定）
- [x] 2.6 データベースマイグレーションスクリプトの作成
- [x] 2.7 初期データの投入（テスト用店舗データ、システム設定）

### 3. バックエンドAPI開発（MVP最小限）
- [x] 3.1 認証システムの実装（JWT + HTTP-only cookies）
- [x] 3.2 店舗管理API（CRUD操作）
- [x] 3.3 店舗管理者認証API
- [x] 3.4 システム管理者認証API
- [x] 3.5 空き状況更新API
- [x] 3.6 店舗検索API（位置情報ベース）
- [ ] 3.7 リアルタイム更新機能（WebSocket/SSE）
- [x] 3.8 システム設定管理API（検索半径設定）

### 4. フロントエンド開発（MVP最小限）

#### 4.1 共通コンポーネント
- [x] 4.1.1 レイアウトコンポーネント
- [x] 4.1.2 ナビゲーションコンポーネント
- [x] 4.1.3 ローディングコンポーネント
- [x] 4.1.4 エラーハンドリングコンポーネント

#### 4.2 利用者用アプリ（MVP必須）
- [x] 4.2.1 店舗検索画面（位置情報取得）
- [x] 4.2.2 店舗リスト表示画面
- [x] 4.2.3 地図表示画面（Google Maps統合）
- [x] 4.2.4 店舗詳細画面
- [x] 4.2.5 レスポンシブデザイン対応

#### 4.3 店舗管理者用アプリ（MVP必須）
- [x] 4.3.1 ログイン画面
- [x] 4.3.2 ダッシュボード画面
- [x] 4.3.3 店舗情報編集画面
- [x] 4.3.4 空き状況更新画面
- [x] 4.3.5 モバイル対応

#### 4.4 システム管理者用アプリ（MVP必須）
- [x] 4.4.1 管理者ログイン画面
- [x] 4.4.2 管理者ダッシュボード
- [x] 4.4.3 店舗管理画面（登録・編集・削除）
- [x] 4.4.4 店舗管理者アカウント管理画面
- [x] 4.4.5 システム設定管理画面（検索半径設定）

### 5. MVPリリース準備
- [x] 5.1 基本的なセキュリティ実装（認証・認可）
- [x] 5.2 フロントエンドデプロイ設定（Vercel）
- [x] 5.3 バックエンドデプロイ設定（Railway）
- [x] 5.4 データベース本番環境設定
- [x] 5.5 環境変数の設定
- [x] 5.6 基本的なドキュメント作成（README、API仕様）
- [x] 5.7 MVP機能テストの実行

### 6. 追加実装機能（MVP強化）
- [x] 6.1 Swagger/OpenAPI 3.0 API仕様書の作成
- [x] 6.2 スタッフQRコード機能（認証不要の空き状況更新）
- [x] 6.3 Geocoding API統合（住所から位置情報取得）
- [x] 6.4 郵便番号自動補完機能（zipcloud API統合）
- [x] 6.5 画像アップロード・圧縮機能（クライアントサイド）
- [x] 6.6 営業時間の自動判定（日付跨ぎ対応）
- [x] 6.7 距離計算とソート機能（Haversine formula）
- [x] 6.8 プロジェクトクリーンアップとコード品質向上

---

## Phase 2以降: 機能拡張（未確定・将来実装）

### Phase 2: 利用者体験向上
- [ ] PWA機能実装（Web App Manifest、Service Worker）
- [ ] Google Maps API統合（地図表示、マーカー機能）
- [ ] オフライン対応
- [ ] プッシュ通知機能

### Phase 3: 品質・運用向上
- [ ] 包括的なテスト実装（単体・統合・E2E）
- [ ] セキュリティ強化（CSRF、XSS対策、レート制限）
- [ ] パフォーマンス最適化（バンドル最適化、キャッシュ戦略）
- [ ] 運用監視（ログ監視、バックアップ、アラート）

### Phase 4: 機能拡張（将来）
- [ ] システム監視画面
- [ ] 高度な分析機能
- [ ] マルチテナント対応
- [ ] API v2実装

---

## 📊 MVP進捗状況（2025年10月24日時点）

### 🎉 Phase 1: MVPリリース - ✅ 100%完了

**MVPリリースに必要な全ての機能が実装・デプロイ完了しました！**

- **プロジェクト初期設定**: 100%完了 ✅
- **データベース設計・実装**: 100%完了 ✅
  - 基本テーブル設計
  - 追加マイグレーション（住所フィールド、スタッフQRコード、画像URL拡張）
- **バックエンドAPI開発**: 100%完了 ✅（MVP必須機能）
  - ✅ 認証システム: 100%完了
  - ✅ 店舗管理API: 100%完了
  - ✅ 空き状況更新API: 100%完了
  - ✅ システム設定管理API: 100%完了
  - ✅ 店舗検索API（位置情報ベース）: 100%完了
  - ✅ スタッフQRコード機能: 100%完了
  - ✅ Geocoding統合: 100%完了
  - ⏭️ リアルタイム更新機能: Phase 2へ延期
- **フロントエンド開発**: 100%完了 ✅
  - ✅ 共通コンポーネント: 100%完了
  - ✅ 利用者用アプリ: 100%完了（Google Maps含む）
  - ✅ 店舗管理者用アプリ: 100%完了
  - ✅ システム管理者用アプリ: 100%完了
- **MVPリリース準備**: 100%完了 ✅
- **追加実装機能**: 100%完了 ✅

### 🚀 本番環境情報
- **フロントエンド**: https://furanomi.com
- **バックエンドAPI**: https://api.furanomi.com
- **API仕様書**: http://localhost:3001/api-docs（開発環境のみ）
- **リポジトリ**: https://github.com/ytskmt14/furanomi
- **完了日**: 2025年10月24日

---

## 🎉 MVP達成状況

### ✅ MVP成功の定義 - 全て達成！
- ✅ 利用者が店舗の空き状況を確認できる
- ✅ 店舗管理者が空き状況を更新できる
- ✅ システム管理者が店舗を登録・管理できる
- ✅ 基本的なセキュリティが実装されている
- ✅ 本番環境で動作する

### 📈 次のステップ

#### Phase 2: 利用者体験向上（計画中）
1. **ユーザーフィードバック収集**
   - 本番環境での利用状況モニタリング
   - ユーザーからの要望・改善点の収集

2. **機能拡張の検討**
   - リアルタイム更新機能（WebSocket/SSE）
   - PWA対応（オフライン機能、プッシュ通知）
   - 高度な検索・フィルタリング機能

#### Phase 3: 品質・運用向上（将来）
- 包括的なテスト実装（単体・統合・E2E）
- セキュリティ強化（CSRF、XSS対策、レート制限）
- パフォーマンス最適化（バンドル最適化、キャッシュ戦略）
- 運用監視（ログ監視、バックアップ、アラート）

---

## 🎯 実装完了機能一覧

### 利用者向け機能
- ✅ 位置情報ベースの店舗検索
- ✅ 店舗リスト表示（距離順ソート）
- ✅ Google Maps統合（地図表示、店舗ピン）
- ✅ 店舗詳細表示（営業時間、空き状況）
- ✅ カテゴリ・空き状況フィルタリング
- ✅ レスポンシブデザイン（モバイル対応）

### 店舗管理者向け機能
- ✅ 認証システム（ログイン・ログアウト）
- ✅ ダッシュボード
- ✅ 店舗情報編集（基本情報、営業時間、画像）
- ✅ 空き状況更新
- ✅ スタッフQRコード発行・管理
- ✅ モバイル対応

### システム管理者向け機能
- ✅ 認証システム（ログイン・ログアウト）
- ✅ 管理ダッシュボード（統計情報）
- ✅ 店舗管理（登録・編集・削除）
- ✅ 店舗管理者アカウント管理
- ✅ システム設定管理（検索半径）
- ✅ モバイルファースト対応

### スタッフ向け機能
- ✅ QRコード経由アクセス（認証不要）
- ✅ パスコード認証
- ✅ 空き状況更新

### 技術機能
- ✅ JWT + HTTP-only cookies認証
- ✅ 位置情報計算（Haversine formula）
- ✅ Google Maps Geocoding API統合
- ✅ 郵便番号自動補完（zipcloud API）
- ✅ 画像圧縮・アップロード
- ✅ 営業時間自動判定（日付跨ぎ対応）
- ✅ Swagger/OpenAPI 3.0 API仕様書
- ✅ Vercel + Railway デプロイ