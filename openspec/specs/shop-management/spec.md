# shop-management Specification

## Purpose
TBD - created by archiving change add-furanomi-system. Update Purpose after archive.
## Requirements
### Requirement: 店舗管理者認証
店舗管理者は認証されたアカウントでログインできる。システムSHALL有効な認証情報でのみダッシュボードへのアクセスを許可する。

#### Scenario: ログイン
- **WHEN** 店舗管理者がログイン画面で認証情報を入力する
- **THEN** 有効な認証情報の場合、ダッシュボードにアクセスできる

#### Scenario: ログアウト
- **WHEN** 店舗管理者がログアウトボタンをクリックする
- **THEN** セッションが終了し、ログイン画面に戻る

#### Scenario: 認証エラー
- **WHEN** 店舗管理者が無効な認証情報を入力する
- **THEN** エラーメッセージが表示され、ログインできない

### Requirement: 店舗情報更新
店舗管理者は自分の店舗の情報を更新できる。システムSHALL店舗管理者が自分の店舗の情報のみを編集できるようにする。

#### Scenario: 店舗情報の編集
- **WHEN** 店舗管理者が店舗情報編集画面にアクセスする
- **THEN** 店舗名、住所、電話番号、営業時間、カテゴリ、店舗画像を編集できる

#### Scenario: 店舗画像のアップロード
- **WHEN** 店舗管理者が店舗画像をアップロードする
- **THEN** ファイル選択ダイアログが表示され、画像ファイルを選択できる
- **AND** アップロード前に画像プレビューが表示される
- **AND** ファイルサイズと形式のバリデーションが実行される

#### Scenario: 営業時間の設定（日付跨ぎ対応）
- **WHEN** 店舗管理者が営業時間を設定する
- **THEN** 各曜日ごとに営業開始時刻と終了時刻を設定できる
- **AND** 終了時刻が翌日にまたがる場合は「翌日」フラグを設定できる
- **AND** 例：月曜日 17:00 - 火曜日 04:00（翌日）

#### Scenario: 店舗情報の保存
- **WHEN** 店舗管理者が変更内容を保存する
- **THEN** 変更がデータベースに反映され、利用者画面に即座に反映される

#### Scenario: バリデーション
- **WHEN** 店舗管理者が必須項目を空にして保存しようとする
- **THEN** エラーメッセージが表示され、保存できない

### Requirement: 空き状況管理
店舗管理者はリアルタイムで空き状況を更新できる。システムSHALL空き状況の変更を即座に利用者画面に反映する。

#### Scenario: 空き状況の更新
- **WHEN** 店舗管理者が空き状況を「空きあり」「混雑」「満席」に変更する
- **THEN** 利用者画面に即座に反映される

#### Scenario: 営業時間外の設定
- **WHEN** 店舗管理者が営業時間外に設定する
- **THEN** 利用者画面に「営業時間外」と表示される

### Requirement: スタッフ用空き状況更新機能
店舗スタッフは店舗管理者の認証なしで空き状況を更新できる。システムSHALL QRコードと4桁パスコードによる認証を提供する。

#### Scenario: QRコード生成
- **WHEN** 店舗管理者が空き状況更新画面でQRコードを生成する
- **THEN** 無期限のアクセストークンを含むQRコードが表示される
- **AND** 4桁の数字パスコードが自動生成される
- **AND** QRコードとパスコードは再発行可能である

#### Scenario: スタッフ用空き状況更新
- **WHEN** スタッフがQRコードを読み取り、4桁パスコードを入力する
- **THEN** 空き状況更新画面にアクセスできる
- **AND** ヘッダーのみのシンプルなUIで空き状況を更新できる

#### Scenario: パスコード認証
- **WHEN** スタッフが間違ったパスコードを入力する
- **THEN** 認証エラーが表示され、アクセスが拒否される

### Requirement: ダッシュボード（簡素化版）
店舗管理者は店舗の状況を確認できる。システムSHALL現在の空き状況と店舗基本情報をダッシュボードに表示する。

#### Scenario: ダッシュボード表示
- **WHEN** 店舗管理者がダッシュボードにアクセスする
- **THEN** 現在の空き状況と店舗基本情報が表示される
- **AND** クイックアクションや更新履歴は表示されない（シンプルな構成）

#### Scenario: ナビゲーション
- **WHEN** 店舗管理者がダッシュボードから各機能にアクセスする
- **THEN** ヘッダーナビゲーションで「店舗情報編集」「空き状況更新」にアクセスできる

### Requirement: アクセス権限
店舗管理者は自分の店舗のみ管理できる。システムSHALL店舗管理者が他の店舗の情報にアクセスできないようにする。

#### Scenario: 他店舗へのアクセス制限
- **WHEN** 店舗管理者が他の店舗の情報にアクセスしようとする
- **THEN** アクセスが拒否され、エラーメッセージが表示される

#### Scenario: 自分の店舗のみ表示
- **WHEN** 店舗管理者が店舗一覧を表示する
- **THEN** 自分が管理する店舗のみが表示される

### Requirement: レスポンシブデザイン
店舗管理者はモバイルデバイスでも操作できる。システムSHALLモバイル・タブレットに最適化されたUIを提供する。

#### Scenario: モバイル表示
- **WHEN** 店舗管理者がスマートフォンでアプリにアクセスする
- **THEN** モバイルに最適化されたUIで操作できる

#### Scenario: タブレット表示
- **WHEN** 店舗管理者がタブレットでアプリにアクセスする
- **THEN** タブレットに最適化されたUIで操作できる

